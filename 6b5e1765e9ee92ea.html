<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="robots" content="noindex,nofollow">
<title>Review ‚Äî Loyalty Intelligence Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0f1117;--surface:#1a1d27;--surface2:#242836;--border:#2e3348;--text:#e4e6f0;--text2:#9ca3b8;--accent:#6c8cff;--accent2:#4a6adf;--red:#ff5c5c;--orange:#ffaa3c;--green:#5cdb7f;--yellow:#ffd64a}
[data-theme=light]{--bg:#f4f5f7;--surface:#fff;--surface2:#eef0f4;--border:#d8dbe5;--text:#1a1d27;--text2:#5a6178;--accent:#4a6adf;--accent2:#3a56c0;--red:#d93636;--orange:#d88a1a;--green:#2a9d4e;--yellow:#c9a530}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);line-height:1.5}
.gate{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
.gate-box{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:40px;max-width:380px;width:100%;text-align:center}
.gate-box h1{font-size:1.3rem;margin-bottom:8px}
.gate-box p{color:var(--text2);font-size:.9rem;margin-bottom:24px}
.gate-box input{width:100%;padding:12px 16px;border-radius:8px;border:1px solid var(--border);background:var(--surface2);color:var(--text);font-size:1rem;margin-bottom:12px}
.gate-box button{width:100%;padding:12px;border-radius:8px;border:none;background:var(--accent);color:#fff;font-size:1rem;font-weight:600;cursor:pointer}
.gate-box button:hover{background:var(--accent2)}
.hidden{display:none!important}
header{padding:16px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
header h1{font-size:1.3rem;font-weight:700}
.controls{display:flex;gap:8px;align-items:center}
.controls button,.tab-btn{padding:6px 14px;border-radius:6px;border:1px solid var(--border);background:var(--surface2);color:var(--text);font-size:.85rem;cursor:pointer;transition:all .15s}
.controls button:hover,.tab-btn:hover{border-color:var(--accent)}
.tab-bar{display:flex;gap:6px;padding:12px 24px;border-bottom:1px solid var(--border);overflow-x:auto;flex-wrap:wrap}
.tab-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.tab-panel{display:none;padding:24px;max-width:1400px;margin:0 auto}
.tab-panel.active{display:block}
.kpi-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}
.kpi{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:20px}
.kpi .label{font-size:.75rem;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}
.kpi .value{font-size:1.8rem;font-weight:700}
.kpi .sub{font-size:.85rem;color:var(--text2);margin-top:4px}
.section{background:var(--surface);border:1px solid var(--border);border-radius:12px;margin-bottom:20px;overflow:hidden}
.section-header{padding:14px 20px;border-bottom:1px solid var(--border)}
.section-header h2{font-size:1.05rem;font-weight:600}
.section-body{padding:20px}
.chart-container{position:relative;height:300px;width:100%}
.chart-container.tall{height:400px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.insight-box{padding:16px;border-left:3px solid var(--accent);background:var(--surface2);border-radius:0 8px 8px 0;margin-bottom:12px}
.insight-box strong{color:var(--text)}
.insight-box{color:var(--text2);font-size:.9rem;line-height:1.6}
table{width:100%;border-collapse:collapse;font-size:.85rem}
th{text-align:left;padding:8px 12px;color:var(--text2);font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.3px;border-bottom:1px solid var(--border)}
td{padding:8px 12px;border-bottom:1px solid var(--border)}
tr:last-child td{border-bottom:none}
tr:hover{background:var(--surface2)}
.badge{display:inline-block;padding:2px 8px;border-radius:4px;font-size:.75rem;font-weight:600}
.badge.red{background:rgba(255,92,92,.15);color:var(--red)}
.badge.green{background:rgba(92,219,127,.15);color:var(--green)}
.badge.orange{background:rgba(255,170,60,.15);color:var(--orange)}
.badge.blue{background:rgba(108,140,255,.15);color:var(--accent)}
.footer{text-align:center;padding:32px;color:var(--text2);font-size:.8rem}
@media(max-width:768px){
  header{padding:12px 16px}
  .tab-panel{padding:16px}
  .kpi .value{font-size:1.4rem}
  .grid-2{grid-template-columns:1fr}
  .chart-container{height:250px}
}
</style>
</head>
<body>

<div id="gate" class="gate">
<div class="gate-box">
<h1>üîí Review Australia</h1>
<p>Loyalty Intelligence Dashboard ‚Äî Internal Only</p>
<input type="password" id="pw" placeholder="Password" autofocus>
<button onclick="unlock()">Access</button>
</div>
</div>

<div id="app" class="hidden">
<header>
<h1>Review ‚Äî Loyalty Intelligence</h1>
<div class="controls">
<span style="color:var(--text2);font-size:.8rem">Data as at Feb 2026</span>
<button onclick="toggleTheme()">‚òÄÔ∏è / üåô</button>
</div>
</header>

<div class="tab-bar">
<button class="tab-btn active" onclick="showTab('overview')">Overview</button>
<button class="tab-btn" onclick="showTab('members')">Members</button>
<button class="tab-btn" onclick="showTab('tiers')">Tiers</button>
<button class="tab-btn" onclick="showTab('transactions')">Transactions</button>
<button class="tab-btn" onclick="showTab('locations')">Locations</button>
<button class="tab-btn" onclick="showTab('loyalty')">Loyalty & Rewards</button>
</div>

<!-- OVERVIEW TAB -->
<div id="tab-overview" class="tab-panel active">
<div class="kpi-row">
<div class="kpi"><div class="label">Total Members</div><div class="value">1,073,023</div><div class="sub">Across all tiers</div></div>
<div class="kpi"><div class="label">Tier 1 (Base)</div><div class="value">1,068,108</div><div class="sub">99.5% of members</div></div>
<div class="kpi"><div class="label">Tier 2</div><div class="value">4,355</div><div class="sub">0.41%</div></div>
<div class="kpi"><div class="label">Tier 3 + Dress Circle</div><div class="value">560</div><div class="sub">369 + 191</div></div>
</div>

<div class="kpi-row">
<div class="kpi"><div class="label">FY26 YTD Revenue (Loyalty)</div><div class="value">$30.8M</div><div class="sub">Jul 25 ‚Äì Feb 26</div></div>
<div class="kpi"><div class="label">FY26 YTD Transactions</div><div class="value">256K</div><div class="sub">Jul 25 ‚Äì Feb 26</div></div>
<div class="kpi"><div class="label">AOV (12m)</div><div class="value">$131</div><div class="sub">Stable vs prior year</div></div>
<div class="kpi"><div class="label">Total Redemptions</div><div class="value">187,901</div><div class="sub">5,894 reversals (3.1%)</div></div>
</div>

<div class="section">
<div class="section-header"><h2>‚ö° Key Insights</h2></div>
<div class="section-body">
<div class="insight-box"><strong>Dress Circle in decline:</strong> 695 members entered in 2021, but net negative every year since. Only 191 remain. 7‚Äì20 new qualifiers/year vs 230+ dropping out. The tier is slowly dying.</div>
<div class="insight-box"><strong>Massive Tier 1 churn cycle:</strong> From Sep 2025, tier movement events spiked to 433K in a single month ‚Äî likely automated re-evaluation. The vast majority cycle back to Tier 1.</div>
<div class="insight-box"><strong>Dec 2024 signup anomaly:</strong> 21,633 signups in Dec 2024 ‚Äî 3x normal. Likely a campaign or data import. Jan 2025 dropped to 3,682.</div>
<div class="insight-box"><strong>Revenue declining:</strong> CY25 loyalty revenue $45.1M vs CY24 $48.6M vs CY23 $55.9M. Transactions also down ‚Äî 344K (CY25) vs 377K (CY24). AOV flat at ~$131.</div>
<div class="insight-box"><strong>Network shrinking:</strong> 84 of 165 locations now closed (51%). Boutique closures + Myer concession rationalization.</div>
<div class="insight-box"><strong>NSW dominates:</strong> 99,758 members (34%), followed by VIC 69,276 (24%), QLD 44,423 (15%). WA 30,892 (11%).</div>
</div>
</div>
</div>

<!-- MEMBERS TAB -->
<div id="tab-members" class="tab-panel">
<div class="section">
<div class="section-header"><h2>Monthly Signups</h2></div>
<div class="section-body"><div class="chart-container" id="chart-signups-wrap"><canvas id="chart-signups"></canvas></div></div>
</div>

<div class="grid-2">
<div class="section">
<div class="section-header"><h2>Members by State</h2></div>
<div class="section-body">
<table><thead><tr><th>State</th><th>Members</th><th>%</th></tr></thead><tbody id="tbl-state"></tbody></table>
</div>
</div>
<div class="section">
<div class="section-header"><h2>Top Postcodes</h2></div>
<div class="section-body">
<table><thead><tr><th>Postcode</th><th>Members</th></tr></thead><tbody id="tbl-postcode"></tbody></table>
</div>
</div>
</div>

<div class="section">
<div class="section-header"><h2>Profile Status Breakdown</h2></div>
<div class="section-body">
<table><thead><tr><th>Status</th><th>Count</th></tr></thead><tbody id="tbl-profile-status"></tbody></table>
</div>
</div>
</div>

<!-- TIERS TAB -->
<div id="tab-tiers" class="tab-panel">
<div class="kpi-row">
<div class="kpi"><div class="label">Tier 1</div><div class="value" style="color:var(--accent)">1,068,108</div></div>
<div class="kpi"><div class="label">Tier 2</div><div class="value" style="color:var(--green)">4,355</div></div>
<div class="kpi"><div class="label">Tier 3</div><div class="value" style="color:var(--orange)">369</div></div>
<div class="kpi"><div class="label">Dress Circle</div><div class="value" style="color:var(--yellow)">191</div></div>
</div>

<div class="section">
<div class="section-header"><h2>Tier Movements (Monthly ‚Äî Tier 2, 3, Dress Circle)</h2></div>
<div class="section-body"><div class="chart-container tall"><canvas id="chart-tier-movements"></canvas></div>
<p style="color:var(--text2);font-size:.8rem;margin-top:8px">Note: Tier 1 movements excluded from chart due to scale (100K+ monthly from Sep 2025). Showing upper tiers only.</p>
</div>
</div>

<div class="section">
<div class="section-header"><h2>Dress Circle ‚Äî Year over Year</h2></div>
<div class="section-body">
<table>
<thead><tr><th>Year</th><th>Into DC</th><th>Out of DC</th><th>Net</th></tr></thead>
<tbody>
<tr><td>2021</td><td>695</td><td>1</td><td><span class="badge green">+694</span></td></tr>
<tr><td>2022</td><td>238</td><td>266</td><td><span class="badge red">-28</span></td></tr>
<tr><td>2023</td><td>124</td><td>310</td><td><span class="badge red">-186</span></td></tr>
<tr><td>2024</td><td>103</td><td>246</td><td><span class="badge red">-143</span></td></tr>
<tr><td>2025</td><td>147</td><td>232</td><td><span class="badge red">-85</span></td></tr>
<tr><td>2026 YTD</td><td>20</td><td>25</td><td><span class="badge red">-5</span></td></tr>
</tbody>
</table>
</div>
</div>
</div>

<!-- TRANSACTIONS TAB -->
<div id="tab-transactions" class="tab-panel">
<div class="section">
<div class="section-header"><h2>Annual Transaction Summary</h2></div>
<div class="section-body"><div class="chart-container tall"><canvas id="chart-txn-yearly"></canvas></div></div>
</div>

<div class="section">
<div class="section-header"><h2>Monthly Transactions & Revenue (Last 24m)</h2></div>
<div class="section-body"><div class="chart-container tall"><canvas id="chart-txn-monthly"></canvas></div></div>
</div>

<div class="section">
<div class="section-header"><h2>Annual Detail</h2></div>
<div class="section-body">
<table>
<thead><tr><th>Year</th><th>Transactions</th><th>Revenue</th><th>AOV</th><th>YoY Rev</th></tr></thead>
<tbody id="tbl-txn-yearly"></tbody>
</table>
</div>
</div>
</div>

<!-- LOCATIONS TAB -->
<div id="tab-locations" class="tab-panel">
<div class="kpi-row">
<div class="kpi"><div class="label">Total Locations</div><div class="value">165</div></div>
<div class="kpi"><div class="label">Open</div><div class="value" style="color:var(--green)">81</div></div>
<div class="kpi"><div class="label">Closed</div><div class="value" style="color:var(--red)">84</div></div>
</div>

<div class="grid-2">
<div class="section">
<div class="section-header"><h2>Locations by Type</h2></div>
<div class="section-body"><div class="chart-container"><canvas id="chart-loc-type"></canvas></div></div>
</div>
<div class="section">
<div class="section-header"><h2>Open vs Closed</h2></div>
<div class="section-body"><div class="chart-container"><canvas id="chart-loc-status"></canvas></div></div>
</div>
</div>
</div>

<!-- LOYALTY TAB -->
<div id="tab-loyalty" class="tab-panel">
<div class="kpi-row">
<div class="kpi"><div class="label">Total Redemptions</div><div class="value">187,901</div></div>
<div class="kpi"><div class="label">Reversals</div><div class="value">5,894</div><div class="sub">3.1% reversal rate</div></div>
<div class="kpi"><div class="label">Ratings (Positive)</div><div class="value">25,445</div></div>
<div class="kpi"><div class="label">Ratings (Negative)</div><div class="value">979</div><div class="sub">96.3% positive</div></div>
</div>

<div class="section">
<div class="section-header"><h2>Redemptions by Year</h2></div>
<div class="section-body"><div class="chart-container"><canvas id="chart-redemptions"></canvas></div></div>
</div>

<div class="section">
<div class="section-header"><h2>Profile Special Statuses</h2></div>
<div class="section-body">
<table>
<thead><tr><th>Status</th><th>Count</th><th>Notes</th></tr></thead>
<tbody>
<tr><td>Dress Circle</td><td>1,871</td><td>Profile status flag (differs from tier ‚Äî likely historical tagging)</td></tr>
<tr><td>Non Member</td><td>34,106</td><td>Profiles without active membership</td></tr>
<tr><td>Staff</td><td>351</td><td>Current staff</td></tr>
<tr><td>Ex Staff</td><td>934</td><td>Former staff</td></tr>
<tr><td>Foundation</td><td>2</td><td></td></tr>
<tr><td>Media</td><td>1</td><td></td></tr>
<tr><td>Family</td><td>5</td><td></td></tr>
<tr><td>Stylist</td><td>1</td><td></td></tr>
<tr><td>Excluded</td><td>4</td><td></td></tr>
</tbody>
</table>
<div class="insight-box" style="margin-top:16px"><strong>Note:</strong> 1,871 profiles have "Dress Circle" as a profile status, but only 191 are in the Dress Circle tier. The profile status appears to be a legacy tag ‚Äî many former DC members retain the status label even after dropping out of the tier.</div>
</div>
</div>
</div>

<div class="footer">Review Australia ‚Äî Loyalty Intelligence Dashboard ‚Ä¢ Generated 16 Feb 2026 ‚Ä¢ Internal Use Only ‚Äî Brand Collective</div>
</div>

<script>
const HASH='1e0bbd6c686ba050b8eb03ffeedc64fdc9d80947fce821abbe5d6dc8d252c5ac';
function sha256(s){return crypto.subtle.digest('SHA-256',new TextEncoder().encode(s)).then(b=>Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,'0')).join(''))}
function unlock(){sha256(document.getElementById('pw').value).then(h=>{if(h===HASH){localStorage.setItem('rev_loyalty_auth','1');show()}else{document.getElementById('pw').style.borderColor='var(--red)';document.getElementById('pw').value=''}})}
function show(){document.getElementById('gate').classList.add('hidden');document.getElementById('app').classList.remove('hidden');initCharts()}
if(localStorage.getItem('rev_loyalty_auth')==='1')window.addEventListener('DOMContentLoaded',show);
document.getElementById('pw')?.addEventListener('keydown',e=>{if(e.key==='Enter')unlock()});

function toggleTheme(){document.documentElement.dataset.theme=document.documentElement.dataset.theme==='dark'?'light':'dark';Object.values(charts).forEach(c=>c.update())}
function showTab(id){document.querySelectorAll('.tab-panel').forEach(p=>p.classList.remove('active'));document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.getElementById('tab-'+id).classList.add('active');event.target.classList.add('active')}

const charts={};
const DATA={
  signups:[["2023-01",4728],["2023-02",4773],["2023-03",5865],["2023-04",5672],["2023-05",5727],["2023-06",5569],["2023-07",5215],["2023-08",5300],["2023-09",6638],["2023-10",6379],["2023-11",7653],["2023-12",5390],["2024-01",4188],["2024-02",4257],["2024-03",5049],["2024-04",5178],["2024-05",5084],["2024-06",4612],["2024-07",4665],["2024-08",4993],["2024-09",5105],["2024-10",5737],["2024-11",6632],["2024-12",21633],["2025-01",3682],["2025-02",3425],["2025-03",4758],["2025-04",3970],["2025-05",4354],["2025-06",3811],["2025-07",3334],["2025-08",3946],["2025-09",4200],["2025-10",5007],["2025-11",5334],["2025-12",3969],["2026-01",2977],["2026-02",1563]],
  tierHist:[["2024-01","Dress Circle",9],["2024-01","Tier 2",222],["2024-01","Tier 3",30],["2024-02","Dress Circle",8],["2024-02","Tier 2",255],["2024-02","Tier 3",34],["2024-03","Dress Circle",13],["2024-03","Tier 2",300],["2024-03","Tier 3",37],["2024-04","Dress Circle",9],["2024-04","Tier 2",301],["2024-04","Tier 3",35],["2024-05","Dress Circle",8],["2024-05","Tier 2",302],["2024-05","Tier 3",39],["2024-06","Dress Circle",12],["2024-06","Tier 2",299],["2024-06","Tier 3",32],["2024-07","Dress Circle",10],["2024-07","Tier 2",327],["2024-07","Tier 3",34],["2024-08","Dress Circle",8],["2024-08","Tier 2",329],["2024-08","Tier 3",23],["2024-09","Dress Circle",7],["2024-09","Tier 2",317],["2024-09","Tier 3",33],["2024-10","Dress Circle",7],["2024-10","Tier 2",325],["2024-10","Tier 3",31],["2024-11","Dress Circle",8],["2024-11","Tier 2",372],["2024-11","Tier 3",32],["2024-12","Dress Circle",4],["2024-12","Tier 2",280],["2024-12","Tier 3",23],["2025-01","Dress Circle",5],["2025-01","Tier 2",188],["2025-01","Tier 3",23],["2025-02","Dress Circle",5],["2025-02","Tier 2",149],["2025-02","Tier 3",20],["2025-03","Dress Circle",13],["2025-03","Tier 2",247],["2025-03","Tier 3",22],["2025-04","Dress Circle",18],["2025-04","Tier 2",394],["2025-04","Tier 3",34],["2025-05","Dress Circle",14],["2025-05","Tier 2",413],["2025-05","Tier 3",41],["2025-06","Dress Circle",19],["2025-06","Tier 2",430],["2025-06","Tier 3",24],["2025-07","Dress Circle",12],["2025-07","Tier 2",355],["2025-07","Tier 3",40],["2025-08","Dress Circle",9],["2025-08","Tier 2",373],["2025-08","Tier 3",43],["2025-09","Dress Circle",13],["2025-09","Tier 2",366],["2025-09","Tier 3",35],["2025-10","Dress Circle",10],["2025-10","Tier 2",381],["2025-10","Tier 3",40],["2025-11","Dress Circle",13],["2025-11","Tier 2",498],["2025-11","Tier 3",39],["2025-12","Dress Circle",16],["2025-12","Tier 2",349],["2025-12","Tier 3",27],["2026-01","Dress Circle",13],["2026-01","Tier 2",282],["2026-01","Tier 3",24],["2026-02","Dress Circle",7],["2026-02","Tier 2",158],["2026-02","Tier 3",17]],
  txnYearly:[[2013,537530,66425186.24,123.57],[2014,566610,72767482.74,128.43],[2015,588529,80307427.70,136.45],[2016,603656,83273911.13,137.95],[2017,627246,81769501.07,130.36],[2018,625524,76922814.33,122.97],[2019,558553,69724415.28,124.83],[2020,359296,45418071.14,126.41],[2021,416986,56713761.48,136.01],[2022,447139,59779654.71,133.69],[2023,421521,55863101.13,132.53],[2024,376841,48632624.89,129.05],[2025,344422,45062414.04,130.83],[2026,35843,4829199.46,134.73]],
  txnMonthly:[["2024-01",32508,3685982.93],["2024-02",29938,3650600.99],["2024-03",30395,4054210.09],["2024-04",31319,4116222.36],["2024-05",33519,4233395.06],["2024-06",32105,4035450.64],["2024-07",28878,3897224.39],["2024-08",27262,3744430.18],["2024-09",29983,3917588.13],["2024-10",30992,4124530.81],["2024-11",38398,4909304.44],["2024-12",31544,4263684.87],["2025-01",23006,2807515.16],["2025-02",18741,2489544.72],["2025-03",28712,3675491.73],["2025-04",24118,3133657.90],["2025-05",31598,4100382.66],["2025-06",31622,3962995.62],["2025-07",22645,3056453.15],["2025-08",27707,3700479.45],["2025-09",31298,3974612.54],["2025-10",30280,4362691.27],["2025-11",40332,5333479.03],["2025-12",34363,4465110.81],["2026-01",24416,3167755.77],["2026-02",11431,1661961.63]],
  states:[["NSW",99758],["VIC",69276],["QLD",44423],["WA",30892],["SA",21715],["ACT",10608],["Unknown",7879],["TAS",5398],["NT",924]],
  postcodes:[["2000",1913],["2153",1691],["2145",1605],["2155",1575],["2640",1535],["4350",1511],["3000",1480],["2154",1451],["2170",1328],["2112",1270],["3030",1235],["2650",1162],["5000",1154],["6065",1085],["3806",1072],["6018",1057],["3977",1051],["3805",1033],["2830",1009]],
  locTypes:[[null,4],["Boutiques",50],["Concession",90],["Online",5],["Outlets",15],["store",1]],
  redemptions:[[2021,19294],[2022,67162],[2023,57570],[2024,50491],[2025,36781],[2026,3637]]
};

function initCharts(){
  const accent='#6c8cff',green='#5cdb7f',orange='#ffaa3c',red='#ff5c5c',yellow='#ffd64a',text2='#9ca3b8';
  Chart.defaults.color=text2;
  Chart.defaults.borderColor='rgba(46,51,72,0.5)';
  const gridColor='rgba(46,51,72,0.5)';

  // Signups chart
  charts.signups=new Chart(document.getElementById('chart-signups'),{type:'bar',data:{labels:DATA.signups.map(r=>r[0]),datasets:[{label:'Signups',data:DATA.signups.map(r=>r[1]),backgroundColor:accent+'99',borderRadius:3}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{grid:{color:gridColor}},x:{grid:{display:false},ticks:{maxTicksLimit:12}}}}});

  // Tier movements (excl Tier 1)
  const tierMonths=[...new Set(DATA.tierHist.map(r=>r[0]))];
  const tierNames=['Tier 2','Tier 3','Dress Circle'];
  const tierColors=[green,orange,yellow];
  const tierDS=tierNames.map((n,i)=>({label:n,data:tierMonths.map(m=>{const r=DATA.tierHist.find(x=>x[0]===m&&x[1]===n);return r?r[2]:0}),borderColor:tierColors[i],backgroundColor:tierColors[i]+'33',tension:.3,fill:false}));
  charts.tierMov=new Chart(document.getElementById('chart-tier-movements'),{type:'line',data:{labels:tierMonths,datasets:tierDS},options:{responsive:true,maintainAspectRatio:false,scales:{y:{grid:{color:gridColor}},x:{grid:{display:false},ticks:{maxTicksLimit:12}}}}});

  // Transaction yearly (dual axis)
  const txYears=DATA.txnYearly.filter(r=>r[0]>=2015).map(r=>r[0]);
  const txRev=DATA.txnYearly.filter(r=>r[0]>=2015).map(r=>r[2]);
  const txCount=DATA.txnYearly.filter(r=>r[0]>=2015).map(r=>r[1]);
  charts.txnYr=new Chart(document.getElementById('chart-txn-yearly'),{type:'bar',data:{labels:txYears,datasets:[{label:'Revenue ($)',data:txRev,backgroundColor:accent+'99',borderRadius:3,yAxisID:'y'},{label:'Transactions',data:txCount,type:'line',borderColor:green,backgroundColor:'transparent',yAxisID:'y1',tension:.3}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{position:'left',grid:{color:gridColor},ticks:{callback:v=>'$'+Math.round(v/1e6)+'M'}},y1:{position:'right',grid:{display:false},ticks:{callback:v=>Math.round(v/1e3)+'K'}},x:{grid:{display:false}}}}});

  // Transaction monthly
  charts.txnMo=new Chart(document.getElementById('chart-txn-monthly'),{type:'bar',data:{labels:DATA.txnMonthly.map(r=>r[0]),datasets:[{label:'Revenue ($)',data:DATA.txnMonthly.map(r=>r[2]),backgroundColor:accent+'99',borderRadius:3,yAxisID:'y'},{label:'Transactions',data:DATA.txnMonthly.map(r=>r[1]),type:'line',borderColor:green,backgroundColor:'transparent',yAxisID:'y1',tension:.3}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{position:'left',grid:{color:gridColor},ticks:{callback:v=>'$'+Math.round(v/1e6)+'M'}},y1:{position:'right',grid:{display:false},ticks:{callback:v=>Math.round(v/1e3)+'K'}},x:{grid:{display:false},ticks:{maxTicksLimit:12}}}}});

  // Location type donut
  const ltLabels=DATA.locTypes.filter(r=>r[0]).map(r=>r[0]);
  const ltData=DATA.locTypes.filter(r=>r[0]).map(r=>r[1]);
  charts.locType=new Chart(document.getElementById('chart-loc-type'),{type:'doughnut',data:{labels:ltLabels,datasets:[{data:ltData,backgroundColor:[accent,green,orange,yellow,red]}]},options:{responsive:true,maintainAspectRatio:false}});

  // Location status donut
  charts.locStatus=new Chart(document.getElementById('chart-loc-status'),{type:'doughnut',data:{labels:['Open','Closed'],datasets:[{data:[81,84],backgroundColor:[green,red]}]},options:{responsive:true,maintainAspectRatio:false}});

  // Redemptions by year
  charts.redemptions=new Chart(document.getElementById('chart-redemptions'),{type:'bar',data:{labels:DATA.redemptions.map(r=>r[0]),datasets:[{label:'Redemptions',data:DATA.redemptions.map(r=>r[1]),backgroundColor:green+'99',borderRadius:3}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{grid:{color:gridColor}},x:{grid:{display:false}}}}});

  // Tables
  const stateTotal=DATA.states.reduce((a,r)=>a+r[1],0);
  document.getElementById('tbl-state').innerHTML=DATA.states.map(r=>`<tr><td>${r[0]}</td><td>${r[1].toLocaleString()}</td><td>${(r[1]/stateTotal*100).toFixed(1)}%</td></tr>`).join('');
  document.getElementById('tbl-postcode').innerHTML=DATA.postcodes.map(r=>`<tr><td>${r[0]}</td><td>${r[1].toLocaleString()}</td></tr>`).join('');
  document.getElementById('tbl-profile-status').innerHTML=DATA.profileStatus.map(r=>`<tr><td>${r[0]}</td><td>${r[1].toLocaleString()}</td></tr>`).join('');

  // Txn yearly table
  let txRows='';
  DATA.txnYearly.forEach((r,i)=>{
    const yoy=i>0?((r[2]-DATA.txnYearly[i-1][2])/DATA.txnYearly[i-1][2]*100).toFixed(1)+'%':'‚Äî';
    const cls=i>0?(r[2]>DATA.txnYearly[i-1][2]?'green':'red'):'';
    txRows+=`<tr><td>${r[0]}</td><td>${r[1].toLocaleString()}</td><td>$${(r[2]/1e6).toFixed(1)}M</td><td>$${r[3].toFixed(0)}</td><td><span class="badge ${cls}">${yoy}</span></td></tr>`;
  });
  document.getElementById('tbl-txn-yearly').innerHTML=txRows;
}

DATA.profileStatus=[["Dress Circle",1871],["Non Member",34106],["Staff",351],["Ex Staff",934],["Foundation",2],["Media",1],["Family",5],["Stylist",1],["Excluded",4]];
</script>
</body>
</html>